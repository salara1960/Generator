# Frequency Generator

RISC-V CH32X035(WeAct Studio board) + ssd1306(spi) + ad9833(spi, 1Hz..12,5MHz) + TZT(encoder)



# Средства разработки:

```
- RISC-V IDE MounRiver Studio - среда разработки для микроконтроллеров RISC-V семейства WCH  (http://www.mounriver.com/download)
- WCH-LinkE - загрузчик/отладчик для плат микроконтроллеров RISC-V семейства WCH (можно приобрести тут - https://aliexpress.ru)
```


## Состав рабочего оборудования:

```
- WeAct Studio Board CH32X035F8U6 - отладочная плата с микроконтроллером RISC-V4C CH32X035F8U6
- Rotary Encoder Module - Модуль поворотного энкодера TZT (GPIO)
- OLED Display SSD1306 - Модуль дисплея 128x64 (spi)
- CJMCU-9833 AD9833 - Модуль генератора квадратной, треугольной и синусоидальной волны частотой от 1Гц до 12500000Гц (spi)
```


# Функционал:

* ПО построено по модели BARE METAL (без использования ОС) с использованием флагов событий.
  События обслуживаются в основном цикле программы. Формируются события в callBack-функциях
  по завершении прерываний от используемых модулей микроконтроллера.
* Устройство инициализирует некоторые интерфейсы микроконтроллера :
  - GPIO : подключен сетодиод PB12 - секундный тик.
  - USART4 : параметры порта 115200 8N1 - порт для логов и передачи команд утсройству, если подключен комп.
  - TIM1 : таймер-счетчик временных интервалов в 1 сек., реализован в callback-функции.
  - TIM2 : таймер-счетчик для обслуживания энкодера.
  - SPI1 : обслуживает OLED SSD1306 и собственно чип генератора частот AD9833.
* Прием данных по последовательному порту (USART4) выполняется в callback-функции обработчика прерывания.
* Через USART4 можно отправлять команды на устройство, например :

```
epoch=1608307455
    установить текущее время в формате UTC
 Unix epoch time - 1608307455
```


```
get
    Time:1742218218 sec, freq:32768 Hz, form:'square'
```


```
freq=1000
Set frequency to 1000 Hz
```


```
form=1
Set waveform to 'square' type
```


```
rst
    рестарт устройства
```


* С помощью энкодера можно изменять три параметра генератора :

```
- шаг перестройки частоты (1Гц, 10Гц, 100Гц, 1КГц, 10КГц, 100КГц, 1МГц);
- форму сигнала (треугольная, прямоугольная, синусоидальная);
- собственно частоту в диапазоне от 1Гц по 12500000Гц включительно
```



* Функционал проекта в процессе пополнения.


